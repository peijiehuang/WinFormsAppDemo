# WinFormsAppDemo

è¿™æ˜¯ä¸€ä¸ªåŸºäº **.NET 8.0** æ„å»ºçš„ç°ä»£ Windows Forms æ¡Œé¢åº”ç”¨ç¨‹åºç¤ºä¾‹ã€‚é¡¹ç›®é‡‡ç”¨äº†åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œé›†æˆäº† **SunnyUI** ä½œä¸º UI æ¡†æ¶ï¼Œä½¿ç”¨ **SqlSugar** ä½œä¸º ORM å·¥å…·ï¼Œå¹¶åŒ…å«ç”¨æˆ·ç®¡ç†ã€ç™»å½•è®¤è¯ç­‰åŸºç¡€åŠŸèƒ½æ¨¡å—ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ (Tech Stack)

- **å¼€å‘ç¯å¢ƒ**: Visual Studio 2022+
- **æ¡†æ¶**: .NET 8.0 (Windows)
- **UI åº“**: [SunnyUI](https://gitee.com/yhuse/SunnyUI) (æä¾›ç°ä»£åŒ–çš„æ‰å¹³åŒ–æ§ä»¶å’Œä¸»é¢˜æ”¯æŒ)
- **ORM**: [SqlSugar](https://www.donet5.com/Home/Doc) (è½»é‡çº§ã€é«˜æ€§èƒ½çš„ .NET ORM)
- **æ•°æ®åº“**: SQLite (é»˜è®¤) / æ”¯æŒ SQL Server, MySQL ç­‰ (é€šè¿‡é…ç½®åˆ‡æ¢)
- **ä¾èµ–æ³¨å…¥/é…ç½®**: Microsoft.Extensions.Hosting / Configuration
- **æ—¥å¿—**: Serilog
- **å·¥å…·ç±»**: Newtonsoft.Json

## ğŸ“‚ é¡¹ç›®ç»“æ„åˆ†æ

é¡¹ç›®é‡‡ç”¨æ¸…æ™°çš„åˆ†å±‚ç»“æ„ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ï¼š

```text
WinFormsAppDemo/
â”œâ”€â”€ bin/                    # ç¼–è¯‘è¾“å‡ºç›®å½• (åŒ…å« DLLs å’Œé…ç½®æ–‡ä»¶)
â”œâ”€â”€ Common/                 # å…¬å…±å·¥å…·å±‚
â”‚   â””â”€â”€ LocalizationManager.cs # æœ¬åœ°åŒ–/å¤šè¯­è¨€ç®¡ç†
â”œâ”€â”€ Config/                 # é…ç½®æ–‡ä»¶ç›®å½•
â”œâ”€â”€ Forms/                  # UI å±‚ - çª—ä½“
â”‚   â”œâ”€â”€ Pages/              # UI å±‚ - é¡µé¢ (UserControls, ç”¨äºåœ¨ä¸»çª—ä½“å®¹å™¨ä¸­åˆ‡æ¢)
â”‚   â”‚   â”œâ”€â”€ DashboardPage.cs      # ä»ªè¡¨ç›˜é¡µé¢
â”‚   â”‚   â””â”€â”€ UserManagementPage.cs # ç”¨æˆ·ç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ LoginForm.cs        # ç™»å½•çª—ä½“
â”‚   â”œâ”€â”€ MainForm.cs         # ä¸»çª—ä½“ (é€šå¸¸åŒ…å«ä¾§è¾¹æ å¯¼èˆªå’Œä¸»å†…å®¹åŒº)
â”‚   â””â”€â”€ UserEditForm.cs     # ç”¨æˆ·ç¼–è¾‘/æ–°å¢å¼¹çª—
â”œâ”€â”€ Models/                 # å®ä½“å±‚ (æ•°æ®æ¨¡å‹)
â”‚   â””â”€â”€ User.cs             # ç”¨æˆ·å®ä½“å®šä¹‰
â”œâ”€â”€ Services/               # ä¸šåŠ¡é€»è¾‘ä¸æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ DatabaseService.cs  # æ•°æ®åº“åˆå§‹åŒ–ä¸è¿æ¥ç®¡ç†
â”‚   â””â”€â”€ UserService.cs      # ç”¨æˆ·ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘ (å¢åˆ æ”¹æŸ¥)
â”œâ”€â”€ Resources/              # é™æ€èµ„æº
â”‚   â””â”€â”€ lang-zh-CN.json     # è¯­è¨€åŒ…æ–‡ä»¶
â”œâ”€â”€ Program.cs              # ç¨‹åºå…¥å£ç‚¹ (é…ç½® DI å®¹å™¨, å…¨å±€å¼‚å¸¸å¤„ç†ç­‰)
â””â”€â”€ appsettings.json        # åº”ç”¨ç¨‹åºé…ç½®æ–‡ä»¶ (è¿æ¥å­—ç¬¦ä¸², ç³»ç»Ÿè®¾ç½®)
```

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Getting Started)

1.  **ç¯å¢ƒå‡†å¤‡**: ç¡®ä¿å®‰è£…äº† .NET 8 SDK å’Œ Visual Studioã€‚
2.  **è¿˜åŸåŒ…**: æ‰“å¼€ `WinFormsAppDemo.sln`ï¼ŒVS ä¼šè‡ªåŠ¨è¿˜åŸ NuGet åŒ…ã€‚
3.  **é…ç½®æ•°æ®åº“**: æ£€æŸ¥ `appsettings.json` ä¸­çš„è¿æ¥å­—ç¬¦ä¸²ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œé¡¹ç›®ä¼šåœ¨ `bin` ç›®å½•ä¸‹ç”Ÿæˆ `app.db` (SQLite)ã€‚
4.  **è¿è¡Œ**: æŒ‰ `F5` å¯åŠ¨é¡¹ç›®ã€‚

## ğŸ“ å¼€å‘æŒ‡å—ï¼šå¦‚ä½•æ–°å¢é¡µé¢

æœ¬é¡¹ç›®é‡‡ç”¨äº† SunnyUI çš„é¡µé¢å¯¼èˆªæ¨¡å¼ã€‚è¦åœ¨ `MainForm` ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„åŠŸèƒ½é¡µé¢ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

### æ­¥éª¤ 1: åˆ›å»ºæ–°é¡µé¢ (View)
1.  åœ¨ `Forms/Pages` æ–‡ä»¶å¤¹ä¸Šå³é”® -> **æ·»åŠ ** -> **ç”¨æˆ·æ§ä»¶ (Windows Forms)**ã€‚
2.  å‘½åä¸º `ProductPage.cs` (ç¤ºä¾‹)ã€‚
3.  **å…³é”®æ­¥éª¤**: æ‰“å¼€ä»£ç æ–‡ä»¶ï¼Œå°†ç»§æ‰¿åŸºç±»ä» `UserControl` ä¿®æ”¹ä¸º `UIPage` (éœ€è¦å¼•ç”¨ `Sunny.UI` å‘½åç©ºé—´)ã€‚
    ```csharp
    using Sunny.UI;

    namespace WinFormsAppDemo.Forms.Pages
    {
        // ç»§æ‰¿è‡ª UIPage ä»¥è·å¾— SunnyUI çš„é¡µé¢ç‰¹æ€§
        public partial class ProductPage : UIPage
        {
            public ProductPage()
            {
                InitializeComponent();
            }
        }
    }
    ```
4.  åœ¨è®¾è®¡å™¨ä¸­æ‹–æ‹½æ§ä»¶ï¼Œå®Œæˆç•Œé¢è®¾è®¡ã€‚

### æ­¥éª¤ 2: åˆ›å»ºä¸šåŠ¡é€»è¾‘ (å¯é€‰)
å¦‚æœé¡µé¢éœ€è¦å¤„ç†æ•°æ®ï¼š
1.  åœ¨ `Models` ä¸­åˆ›å»ºå®ä½“ç±» (ä¾‹å¦‚ `Product.cs`)ã€‚
2.  åœ¨ `Services` ä¸­åˆ›å»ºæœåŠ¡ç±» (ä¾‹å¦‚ `ProductService.cs`)ï¼Œç¼–å†™æ•°æ®åº“æ“ä½œä»£ç ã€‚

### æ­¥éª¤ 3: æ³¨å†Œå¹¶æ˜¾ç¤ºé¡µé¢
æ‰“å¼€ `Forms/MainForm.cs` çš„ä»£ç  (é€šå¸¸åœ¨æ„é€ å‡½æ•°æˆ– `Init` æ–¹æ³•ä¸­)ï¼Œæ‰¾åˆ°ä¾§è¾¹æ å¯¼èˆªèœå•çš„é…ç½®ä»£ç ã€‚

å‡è®¾ä¸»çª—ä½“ä½¿ç”¨çš„æ˜¯ `UINavMenu` æˆ– `UIAside`ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š

```csharp
// 1. å®šä¹‰é¡µé¢ç´¢å¼• (å¦‚æœåœ¨è®¾è®¡å™¨ä¸­ä½¿ç”¨äº†ç´¢å¼•)
int pageIndex = 1003; 

// 2. åˆ›å»ºé¡µé¢å®ä¾‹ (æˆ–è€…é€šè¿‡ä¾èµ–æ³¨å…¥è·å–)
var productPage = new WinFormsAppDemo.Forms.Pages.ProductPage();

// 3. å°†èŠ‚ç‚¹æ·»åŠ åˆ°ä¾§è¾¹æ èœå•
// å‚æ•°: èŠ‚ç‚¹æ–‡å­—, é¡µé¢å®ä¾‹/ç´¢å¼•, å›¾æ ‡
TreeNode node = Aside.CreateNode("äº§å“ç®¡ç†", 61451, 24, pageIndex); 

// 4. å¦‚æœä½¿ç”¨ TabControl æˆ–é¡µé¢ç®¡ç†å™¨ï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨æ·»åŠ 
// MainTabControl.AddPage(productPage); 
```

*æ³¨æ„ï¼šå…·ä½“çš„æ³¨å†Œä»£ç å–å†³äº `MainForm` ä¸­ä½¿ç”¨çš„æ˜¯ SunnyUI çš„è‡ªåŠ¨é¡µé¢ç®¡ç†è¿˜æ˜¯æ‰‹åŠ¨ TabControl ç®¡ç†ã€‚è¯·å‚è€ƒ `MainForm.cs` ä¸­ç°æœ‰çš„ `DashboardPage` æ˜¯å¦‚ä½•æ³¨å†Œçš„ã€‚*

## âš™ï¸ é…ç½®è¯´æ˜

é¡¹ç›®çš„æ ¸å¿ƒé…ç½®ä½äº `appsettings.json`:

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "DataSource=app.db"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information"
    }
  }
}
```

## ğŸ¤ è´¡çŒ®ä¸è§„èŒƒ
- ä¿®æ”¹ UI æ—¶è¯·ä¿æŒ SunnyUI çš„é£æ ¼ä¸€è‡´æ€§ã€‚
- ä¸šåŠ¡é€»è¾‘è¯·å°½é‡å†™åœ¨ `Services` å±‚ï¼Œä¿æŒ UI å±‚è½»é‡åŒ–ã€‚
